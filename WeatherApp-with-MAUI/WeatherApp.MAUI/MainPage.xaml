<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="WeatherApp.MAUI.MainPage"
             Title="Weather App">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40" />
            <RowDefinition Height="*" />
            <RowDefinition Height="40" />
        </Grid.RowDefinitions>

        <!--Header-->
        <StackLayout  Grid.Row="0">
            <Grid x:Name="Header">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="400" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="200" />
                </Grid.ColumnDefinitions>

                <!--MAUI Link-->
                <HorizontalStackLayout Grid.Column="0" HorizontalOptions="Start">
                    <Border
                        HeightRequest="38" 
                        WidthRequest="120" 
                        Margin="30, 0, 0, 0"
                        Padding="0"
                        Stroke="Transparent"
                        StrokeThickness="0"
                        StrokeShape="RoundRectangle 20">
                        <Image
                            x:Name="Logo"
                            Margin="0"
                            VerticalOptions="Center"
                            HorizontalOptions="Center"
                            IsAnimationPlaying="True" 
                            Source="logo.gif"/>
                    </Border>
                    <Label Margin="5,5,30,0">
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer Tapped="MAUI_ClickHandler"/>
                            <PointerGestureRecognizer PointerEntered="PointerEntered"/>
                            <PointerGestureRecognizer PointerExited="PointerExited"/>
                        </Label.GestureRecognizers>
                        Weather App with MAUI
                    </Label>
                </HorizontalStackLayout>

                <!--Toggle Theme-->
                <Switch
                    x:Name="ToggleThemeSwitch"
                    Grid.Column="2" 
                    HorizontalOptions="End"
                    Margin="30,-2,30,0"
                    Toggled="ToggleTheme_ClickHandler"/>
            </Grid>

            <!--Top Separator-->
            <BoxView HeightRequest="1" Color="Red" VerticalOptions="End"/>
        </StackLayout>


        <!--Footer-->
        <StackLayout  Grid.Row="2">

            <!--Bottom Separator-->
            <BoxView HeightRequest="1" Color="Red"/>

            <!--Links-->
            <Grid x:Name="Footer">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="200" />
                </Grid.ColumnDefinitions>

                <!--Data Provider Link-->
                <Label 
                    Grid.Column="0"
                    HorizontalOptions="Start" 
                    Margin="30,8,30,0">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Tapped="DataProvider_ClickHandler"/>
                        <PointerGestureRecognizer PointerEntered="PointerEntered"/>
                        <PointerGestureRecognizer PointerExited="PointerExited"/>
                    </Label.GestureRecognizers>
                    Data Provider
                </Label>

                <!--Export Data-->
                <HorizontalStackLayout 
                    HorizontalOptions="Center"
                    Grid.Column="1"
                    IsVisible="{Binding HasCity}">
                    <Label 
                        Margin="0, 5, 10, 5"
                        Text="💾 Export Data"/>
                    <StackLayout 
                        HeightRequest="30" 
                        Margin="0, 5, 0, 0">
                        <Picker 
                            x:Name="FileFormatPicker" 
                            HorizontalOptions="Center" 
                            Margin="0, -7, 0, 0"
                            FlowDirection="LeftToRight"
                            BackgroundColor="AliceBlue"
                            TextColor="Black"
                            SelectedIndexChanged="FileFormatPicker_SelectionHandler">
                            <Picker.Items>
                                <x:String>JSON</x:String>
                                <x:String>XML</x:String>
                            </Picker.Items>
                        </Picker>
                    </StackLayout>
                </HorizontalStackLayout>

                <!--Source Code Link-->
                <Label 
                    Grid.Column="2"
                    HorizontalOptions="End" 
                    Margin="30,8,30,0">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Tapped="SourceCode_ClickHandler"/>
                        <PointerGestureRecognizer PointerEntered="PointerEntered"/>
                        <PointerGestureRecognizer PointerExited="PointerExited"/>
                    </Label.GestureRecognizers>
                    Source Code
                </Label>
            </Grid>
        </StackLayout>
    </Grid>

</ContentPage>
